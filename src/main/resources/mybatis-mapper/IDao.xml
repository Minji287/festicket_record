<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
	PUBLIC "-//mybatis.org/DTD Mapper 3.0/EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.festicket.dao.IDao">

	<select id="getEventListDao" resultType="com.festicket.dto.BoardDto">
		SELECT * FROM <!-- param1 = amount는 한 페이지당 보이는 글의 개수 -->
			(SELECT A.*, FLOOR(((ROWNUM-1) / #{param1}) + 1)PAGE, ROWNUM
				FROM
					(SELECT * from event ORDER BY eventNum DESC)A)
						WHERE PAGE=#{param2}
	</select>
	
	<select id="contentViewDao" resultType="com.festicket.dto.BoardDto">
		SELECT * FROM web_board WHERE eventNum=${param1}
	</select>
	
	<delete id="deleteDao">
		DELETE FROM web_board WHERE eventNum=${param1}
	</delete>
	
</mapper>